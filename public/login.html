<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card p-4 col-md-6 mx-auto">
        <h3 class="text-center">Login</h3>

        <input class="form-control mb-3" id="email" placeholder="Email">
        <input class="form-control mb-3" id="password" type="password" placeholder="Password">

        <button class="btn btn-success w-100" onclick="login()">Login</button>
    </div>
</div>

<script>
async function login(){
    const res = await fetch("/api/auth/login",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            email:email.value,
            password:password.value
        })
    });

    const data = await res.json();

    if(data.token){
        localStorage.setItem("token",data.token);
        localStorage.setItem("role",data.role);

        if(data.role==="USER") location="user-dashboard.html";
        if(data.role==="VENDOR") location="vendor-dashboard.html";
        if(data.role==="ADMIN") location="admin-dashboard.html";
    } else {
        alert(data.message);
    }
}
</script>

</body>
</html>
